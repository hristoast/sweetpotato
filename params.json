{"name":"Sweetpotato","tagline":"Manage your Minecraft server on a GNU/Linux system.","body":"# sweetpotato\r\n-------------\r\n\r\n![sweetpotato logo](http://static.blackholegate.net/i/cyark.jpeg)\r\n\r\n## What is it?\r\n----\r\n\r\n`ssh minecraft@mycoolserver.net`\r\n\r\n`screen -x mcserver`\r\n\r\n`stop`\r\n\r\n`java -Xms1G -Xmx2G -XX:MaxPermSize=256M -jar forge-1.7.10-10.13.2.1272-universal.jar nogui`\r\n\r\nThe above might be pretty close to the normal commands you'd use to restart a Minecraft server 'by hand'.\r\n\r\nBut what if you could do it with just one command, like this: `sweetpotato -r`\r\n\r\n`sweetpotato` is a tool for running a Minecraft server from inside a screen session on a GNU/Linux system. It is written in Python (for Python 3), but with no external Python dependencies (except for the optional WebUI function).\r\n\r\nIt was created as a way to simplify managing a Minecraft server by providing a simple wrapper for common tasks. It knows what your world is and where its files are via command-line options, values set in a configuration file, or a mixture of both!\r\n\r\n## Simple Installation\r\n\r\nJust grab the file and run it:\r\n\r\n    wget https://raw.githubusercontent.com/hristoast/sweetpotato/dev/sweetpotato.py\r\n    chmod +x sweetpotato.py\r\n    ./sweetpotato.py --version\r\n    sweetpotato 0.34b\r\n\r\nA modern distro should have python3, if not make sure you install that first! Note that this would be a *very* minimal install, with command-line capabilities only.\r\n\r\n## Installation\r\n\r\nWith `make` installed and `sudo` access:\r\n\r\n 1. [Download](https://github.com/hristoast/sweetpotato/tarball/dev) or `git clone https://github.com/hristoast/sweetpotato.git`\r\n 1. Extract (if downloaded)\r\n 1. `cd sweetpotato`\r\n 1. `sudo make install`\r\n\r\n## Re-installation\r\n\r\nYou might do this when you want to update your installed version of `sweetpotato`.\r\n\r\nWith `sweetpotato` already installed, `make` installed, and `sudo` access:\r\n\r\n 1. `cd` into your git-cloned or downloaded `sweetpotato` source directory\r\n 1. `sudo make reinstall`\r\n\r\n## Uninstallation\r\n\r\nWith `make` installed and `sudo` access:\r\n\r\n 1. `cd` into your git-cloned source directory\r\n 1. `sudo make uninstall`\r\n\r\n__OR__\r\n\r\n 1. `sudo rm -fr /opt/sweetpotato /usr/bin/sweetpotato`\r\n\r\nWhich are essentially the same thing.\r\n\r\n## Getting Started\r\n----\r\n\r\nLet's set up a server at `/home/hristos/minecraft` and configure it to back up to `/home/hristos/backups`. We'll also set a custom port and level seed too.\r\n\r\n    $ sweetpotato --server-dir /home/hristos/minecraft --backup-dir /home/hristos/backups --port 25566 --level-seed AwesomeSeedYo -gb 1 2 --json\r\n    FATAL: The configured directory \"/home/hristos/backups\" does not exist. Do you need to run --create?\r\n\r\nNot to worry, as the message suggests we will run the create command:\r\n\r\n    $ sweetpotato --server-dir /home/hristos/minecraft --backup-dir /home/hristos/backups --port 25566 --level-seed AwesomeSeedYo -gb 1 2 --create\r\n    [create] Creating \"SweetpotatoWorld\" ...\r\n    [create] Creating /home/hristos/backups ... Done!\r\n    [create] Creating /home/hristos/minecraft ... Done!\r\n    [create] Downloading minecraft_server.1.8.1.jar ... Done!\r\n    [create] Agreeing to the eula ... Done!\r\n    [create] Generating server.properties ... Done!\r\n    [create] World \"SweetpotatoWorld\" has been created!\r\n\r\nNow we've got a server that we can use, but it is a little annoying to pass all of these options each time. Let's capture our configuration in a file that we can read from:\r\n\r\n    $ sweetpotato --server-dir /home/hristos/minecraft --backup-dir /home/hristos/backups --port 25566 --level-seed AwesomeSeedYo -gb 1 2 --genconf > sweetpotato.conf\r\n\r\nJust use the `-c` or `--conf` option to configure `sweetpotato`:\r\n\r\n    $ sweetpotato --conf sweetpotato.conf --json\r\n    {\r\n        \"backup_dir\": \"/home/hristos/backups\",\r\n        \"compression\": \"gz\",\r\n        \"conf_file\": \"/home/hristos/sweetpotato.conf\",\r\n        \"forge\": null,\r\n        \"level_seed\": \"AwesomeSeedYo\",\r\n        \"mc_version\": \"1.8.1\",\r\n        \"mem_format\": \"GB\",\r\n        \"mem_max\": \"2\",\r\n        \"mem_min\": \"1\",\r\n        \"permgen\": null,\r\n        \"port\": \"25566\",\r\n        \"running\": false,\r\n        \"screen_name\": \"SweetpotatoWorld\",\r\n        \"server_dir\": \"/home/hristos/minecraft\",\r\n        \"webui_port\": \"8080\",\r\n        \"world_name\": \"SweetpotatoWorld\"\r\n    }\r\n\r\nThat's better, but we could save even more keystrokes if we wanted to by putting our conf file into the default location as expected by `sweetpotato`, which is `$HOME/.config/sweetpotato/sweetpotato.conf`:\r\n\r\n    $ mv sweetpotato.conf .config/sweetpotato/\r\n    $ sweetpotato --start\r\n    [start] Starting \"SweetpotatoWorld\" ... Done!\r\n\r\nSuccess! Using explicit conf files makes managing multiple servers under one user much easier, but if you are only running one server using the default conf file makes the most sense.\r\n\r\nNow that you've got a working Minecraft server configured with `sweetpotato`, you may want to check out the WebUI:\r\n\r\n    sweetpotato --web\r\n    sweetpotato 0.34b - launching WebUI now!\r\n    Bottle v0.12.7 server starting up (using WSGIRefServer())...\r\n    Listening on http://127.0.0.1:8080/\r\n    Hit Ctrl-C to quit.\r\n\r\nOpen `http://127.0.0.1:8080/` in your favorite web browser and rock & roll!\r\n\r\nOr, you can set up a cron job to run a live backup every day at a set time (or other fun things):\r\n\r\n    $ crontab -l\r\n    # m h  dom mon dow   command\r\n    @reboot (sleep 30s && sweetpotato --start)\r\n    45 23 * * * sweetpotato --backup\r\n    00 12 * * * sweetpotato --say \"`ddate`\"\r\n\r\n## Usage\r\n----\r\n\r\n### Create Server\r\n\r\nCreate the configured server_dir, download the server jar for the configured mc_version, then generate a `server.properties` and agreed-to `eula.txt` file.\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --create\r\n    [create] Creating \"SweetpotatoWorld\" ...\r\n    [create] Creating /srv/backups/minecraft ... Done!\r\n    [create] Creating /srv/minecraft/mc_server ... Done!\r\n    [create] Downloading minecraft_server.1.8.jar ... Done!\r\n    [create] Agreeing to the eula ... Done!\r\n    [create] Generating server.properties ... Done!\r\n    [create] World \"SweetpotatoWorld\" has been created!\r\n\r\nIf you change a setting, like port number, the necessary files are regenerated\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --port 25569 --create\r\n    [create] Creating \"SweetpotatoWorld\" ...\r\n    [create] Found /srv/backups/minecraft!\r\n    [create] Found /srv/minecraft/mc_server!\r\n    [create] Found minecraft_server.1.8.jar!\r\n    [create] Eula agreed to!\r\n    [create] Generating server.properties ... Done!\r\n    [create] World \"SweetpotatoWorld\" has been created!\r\n\r\nBeware when changing values! You can end up with a lost screen name, world name, or some other lost thing that I haven't yet ran into or conceived.\r\n\r\nSuch a scenario will produce unexpected results - you have been warned to keep track of your configs!\r\n\r\n### Generating A Conf File\r\n\r\nIt is possible to print a conf file based on passed-in settings to the stdout:\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --genconf\r\n    ## Generated by sweetpotato at Mon Dec 15 22:32:39 2014\r\n    [Settings]\r\n    webui_port: 8080\r\n    mem_max: 1\r\n    mem_format: GB\r\n    mc_version: 1.8.1\r\n    mem_min: 1\r\n    backup_dir: /srv/backups/minecraft\r\n    compression: gz\r\n    world_name: SweetpotatoWorld\r\n    screen_name: SweetpotatoWorld\r\n    port: 25565\r\n    server_dir: /srv/minecraft/mc_server\r\n\r\nYou can create your own file like this:\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --genconf > myconf.conf\r\n    $ sweetpotato -c myconf.conf --json\r\n    {\r\n        \"backup_dir\": \"/srv/backups/minecraft\",\r\n        \"compression\": \"gz\",\r\n        \"conf_file\": \"/home/larry/myconf.conf\",\r\n        \"forge\": null,\r\n        \"level_seed\": null,\r\n        \"mc_version\": \"1.8.1\",\r\n        \"mem_format\": \"GB\",\r\n        \"mem_max\": \"1\",\r\n        \"mem_min\": \"1\",\r\n        \"permgen\": null,\r\n        \"port\": \"25565\",\r\n        \"running\": false,\r\n        \"screen_name\": \"SweetpotatoWorld\",\r\n        \"server_dir\": \"/srv/minecraft/mc_server\",\r\n        \"webui_port\": \"8080\",\r\n        \"world_name\": \"SweetpotatoWorld\"\r\n    }\r\n\r\nYou can also make your settings the default (so you don't have to pass a conf file or command-line args) by writing them to the default conf file location, which is \r\n`$HOME/.config/sweetpotato/sweetpotato.conf`:\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --seed awesomeseed --genconf > $HOME/.config/sweetpotato/sweetpotato.conf\r\n    $ sweetpotato --json\r\n    {\r\n        \"backup_dir\": \"/srv/backups/minecraft\",\r\n        \"compression\": \"gz\",\r\n        \"conf_file\": null,\r\n        \"forge\": null,\r\n        \"level_seed\": \"awesomeseed\",\r\n        \"mc_version\": \"1.8.1\",\r\n        \"mem_format\": \"GB\",\r\n        \"mem_max\": \"1\",\r\n        \"mem_min\": \"1\",\r\n        \"permgen\": null,\r\n        \"port\": \"25565\",\r\n        \"running\": false,\r\n        \"screen_name\": \"SweetpotatoWorld\",\r\n        \"server_dir\": \"/srv/minecraft/mc_server\",\r\n        \"webui_port\": \"8080\",\r\n        \"world_name\": \"SweetpotatoWorld\"\r\n    }\r\n\r\n### Live Backup\r\n\r\nRun a backup while the server is running. This sends a message to the in-game chat when the backup starts and finishes, then creates a backup of your configured world\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --backup\r\n    [live-backup] Running live backup of \"SweetpotatoWorld\"  ... Done!\r\n\r\nBut the backup will not be ran if the file (named after today's date) already exists:\r\n\r\n    $ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --backup\r\n    [live-backup] Running live backup of \"SweetpotatoWorld\"  ... FATAL: File \"/srv/backups/minecraft/2014-10-20_SweetpotatoWorld.tar.gz\" already exists!\r\n\r\n### Offline Backup\r\n\r\nEnsure that the server is shut down before backing up. Once completed (or errored out) the server will be restarted:\r\n\r\n    $ sweetpotato --offline\r\n    [offline-backup]  Stopping \"SweetpotatoWorld\" ... backing up ... starting \"SweetpotatoWorld\" ... Done!\r\n\r\nAs with the live backup, this will not be ran if the file (named after today's date) already exists:\r\n\r\n    $ sweetpotato --offline\r\n    [offline-backup]  Stopping \"SweetpotatoWorld\" ... backing up ... starting \"SweetpotatoWorld\" ... Done!\r\n    FATAL: File \"/srv/backups/minecraft/2014-10-20_SweetpotatoWorld.tar.gz\" already exists!\r\n\r\n### Restart\r\n\r\n    $ sweetpotato --restart\r\n    [restart] Restarting SweetpotatoWorld ... Done!\r\n\r\nIf the configured world is not running, is is started.\r\n\r\n    $ sweetpotato --restart\r\n    [restart] Starting SweetpotatoWorld ... Done!\r\n\r\n### Start\r\n\r\n    $ sweetpotato --start\r\n    [start] Starting \"SweetpotatoWorld\" ... Done!\r\n\r\nFails if the configured world is already running.\r\n\r\n    $ sweetpotato --start\r\n    FATAL: World \"SweetpotatoWorld\" already running with PID 30320\r\n\r\n### Stop\r\n\r\n    $ sweetpotato --stop\r\n    [stop] Stopping \"SweetpotatoWorld\" ... Done!\r\n\r\nFails if the configured world is not running.\r\n\r\n    $ sweetpotato --stop\r\n    FATAL: Cannot stop \"SweetpotatoWorld\" - it is not running!\r\n    \r\n### Uptime\r\n\r\nSee your server's uptime if it's running:\r\n\r\n    $ sweetpotato --uptime\r\n    LarrylandX has been up for 0 days, 5 hours, 23 minutes, and 40 seconds\r\n\r\n### WebUI\r\n\r\nA simple web-based interface for many of the functions offered by `sweetpotato`. By default it binds to port `8080`, but this can be changed with the `--web-port` option or a conf file setting.\r\n\r\n    $ sweetpotato --web\r\n    sweetpotato 0.34b - launching WebUI now!\r\n    Bottle v0.12.7 server starting up (using WSGIRefServer())...\r\n    Listening on http://127.0.0.1:3434/\r\n    Hit Ctrl-C to quit.\r\n\r\n### Forge\r\n\r\n`sweetpotato` supports using Forge. You can set a specific Forge version with the `-f` or `--forge` option. The extra `-P` or `--permgen` option is available for Forge, by default it is set to 256MB.\r\n\r\n * Both your Forge version and permgen setting can be stored in a conf file or passed in as arguments.\r\n * You can use the `-C` or `--create` option to download your Forge jar, just as you would with a vanilla server, however don't expect to be able to run it as you'll be missing external dependencies.\r\n\r\nHere is an example conf file for a Forge server, taken from my server:\r\n\r\n    ## Generated by sweetpotato at Mon Dec 15 22:29:49 2014\r\n    [Settings]\r\n    mc_version: 1.7.10\r\n    webui_port: 34345\r\n    mem_max: 4\r\n    mem_format: GB\r\n    backup_dir: /srv/ftb/backups\r\n    screen_name: llx\r\n    permgen: 256\r\n    compression: gz\r\n    server_dir: /srv/ftb/LLX\r\n    mem_min: 3\r\n    world_name: LarrylandX\r\n    forge: 1.7.10-10.13.2.1230\r\n\r\n## ETC\r\n\r\n  * [http://hristoast.github.io/sweetpotato](http://hristoast.github.io/sweetpotato)\r\n  * [https://github.com/hristoast/sweetpotato](https://github.com/hristoast/sweetpotato)\r\n  \r\n  _Thanks for reading!_\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}