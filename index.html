<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Sweetpotato by hristoast</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Sweetpotato</h1>
          <h2>Manage your Minecraft server on a GNU/Linux system.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/hristoast/sweetpotato/zipball/dev" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/hristoast/sweetpotato/tarball/dev" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/hristoast/sweetpotato" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="sweetpotato" class="anchor" href="#sweetpotato" aria-hidden="true"><span class="octicon octicon-link"></span></a>sweetpotato</h1>

<hr>

<p><img src="http://static.blackholegate.net/i/cyark.jpeg" alt="sweetpotato logo"></p>

<h2>
<a id="what-is-it" class="anchor" href="#what-is-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it?</h2>

<hr>

<p><code>sweetpotato</code> is a tool for running a Minecraft server from inside a screen session on a GNU/Linux system. It is written in Python (for Python 3), but with no external Python dependencies (except for the optional WebUI function).</p>

<p>It was created as a way to simplify managing a Minecraft server by providing a simple wrapper for common tasks. It knows what your world is and where its files are via command-line options, values set in a configuration file, or a mixture of both!</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>With <code>make</code> installed and <code>sudo</code> access:</p>

<ol>
<li>Download or <code>git clone https://github.com/hristoast/sweetpotato.git</code>
</li>
<li>Extract (if downloaded)</li>
<li><code>cd sweetpotato</code></li>
<li><code>sudo make install</code></li>
</ol>

<h2>
<a id="uninstallation" class="anchor" href="#uninstallation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uninstallation</h2>

<p>With <code>sudo</code> access:</p>

<ol>
<li>
<code>cd</code> into your git-cloned source directory</li>
<li><code>sudo make uninstall</code></li>
</ol>

<p><strong>OR</strong></p>

<ol>
<li><code>sudo rm -fr /opt/sweetpotato /usr/bin/sweetpotato</code></li>
</ol>

<p>Which are essentially the same thing.</p>

<h2>
<a id="issues" class="anchor" href="#issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Issues</h2>

<p>I am sure there may be actual bugs and unintended problems in here, but this section is for known issues relating to design decisions. Things that happen, things <code>sweetpotato</code> can or can't do - things like that.</p>

<ul>
<li><p><code>sweetpotato</code> is very careful in may ways, but it will not keep your settings straight for you. Meaning, you must take care to ensure the directories you configure for backups, servers, and so forth are where you really want these things to be.</p></li>
<li><p>At present <code>sweetpotato</code> has no way of validating the screen you have chosen. This means that if you have two servers running on the same machine, and you give them both the same screen name, <code>sweetpotato</code> is not going to be able to do anything about it and unexpected things will happen!</p></li>
<li><p>The WebUI includes no extra security whatsoever. This is deliberate, any decent HTTP server has a way of providing SSL and authentication functions for you.</p></li>
</ul>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<hr>

<h3>
<a id="create-server" class="anchor" href="#create-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create Server</h3>

<p>Create the configured server_dir, download the server jar for the configured mc_version, then generate a <code>server.properties</code> and agreed-to <code>eula.txt</code> file.</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --create
[create] Creating "SweetpotatoWorld" ...
[create] Creating /srv/backups/minecraft ... Done!
[create] Creating /srv/minecraft/mc_server ... Done!
[create] Downloading minecraft_server.1.8.jar ... Done!
[create] Agreeing to the eula ... Done!
[create] Generating server.properties ... Done!
[create] World "SweetpotatoWorld" has been created!
</code></pre>

<p>If you change a setting, like port number, the necessary files are regenerated</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --port 25569 --create
[create] Creating "SweetpotatoWorld" ...
[create] Found /srv/backups/minecraft!
[create] Found /srv/minecraft/mc_server!
[create] Found minecraft_server.1.8.jar!
[create] Eula agreed to!
[create] Generating server.properties ... Done!
[create] World "SweetpotatoWorld" has been created!
</code></pre>

<p>Beware when changing values! You can end up with a lost screen name, world name, or some other lost thing that I haven't yet ran into or conceived.</p>

<p>Such a scenario will produce unexpected results - you have been warned to keep track of your configs!</p>

<h3>
<a id="generating-a-conf-file" class="anchor" href="#generating-a-conf-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generating A Conf File</h3>

<p>It is possible to print a conf file based on passed-in settings to the stdout:</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --genconf
## Generated by sweetpotato at Mon Dec 15 22:32:39 2014
[Settings]
webui_port: 8080
mem_max: 1
mem_format: GB
mc_version: 1.8.1
mem_min: 1
backup_dir: /srv/backups/minecraft
compression: gz
world_name: SweetpotatoWorld
screen_name: SweetpotatoWorld
port: 25565
server_dir: /srv/minecraft/mc_server
</code></pre>

<p>You can create your own file like this:</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --genconf &gt; myconf.conf
$ sweetpotato -c myconf.conf --json
{
    "backup_dir": "/srv/backups/minecraft",
    "compression": "gz",
    "conf_file": "/home/larry/myconf.conf",
    "forge": null,
    "level_seed": null,
    "mc_version": "1.8.1",
    "mem_format": "GB",
    "mem_max": "1",
    "mem_min": "1",
    "permgen": null,
    "port": "25565",
    "running": false,
    "screen_name": "SweetpotatoWorld",
    "server_dir": "/srv/minecraft/mc_server",
    "webui_port": "8080",
    "world_name": "SweetpotatoWorld"
}
</code></pre>

<p>You can also make your settings the default (so you don't have to pass a conf file or command-line args) by writing them to the default conf file location, which is 
<code>$HOME/.config/sweetpotato/sweetpotato.conf</code>:</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --seed awesomeseed --genconf &gt; $HOME/.config/sweetpotato/sweetpotato.conf
$ sweetpotato --json
{
    "backup_dir": "/srv/backups/minecraft",
    "compression": "gz",
    "conf_file": null,
    "forge": null,
    "level_seed": "awesomeseed",
    "mc_version": "1.8.1",
    "mem_format": "GB",
    "mem_max": "1",
    "mem_min": "1",
    "permgen": null,
    "port": "25565",
    "running": false,
    "screen_name": "SweetpotatoWorld",
    "server_dir": "/srv/minecraft/mc_server",
    "webui_port": "8080",
    "world_name": "SweetpotatoWorld"
}
</code></pre>

<h3>
<a id="live-backup" class="anchor" href="#live-backup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Live Backup</h3>

<p>Run a backup while the server is running. This sends a message to the in-game chat when the backup starts and finishes, then creates a backup of your configured world</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --backup
[live-backup] Running live backup of "SweetpotatoWorld"  ... Done!
</code></pre>

<p>But the backup will not be ran if the file (named after today's date) already exists:</p>

<pre><code>$ sweetpotato -d /srv/backups/minecraft -s /srv/minecraft/mc_server -gb 1 1 --backup
[live-backup] Running live backup of "SweetpotatoWorld"  ... FATAL: File "/srv/backups/minecraft/2014-10-20_SweetpotatoWorld.tar.gz" already exists!
</code></pre>

<h3>
<a id="offline-backup" class="anchor" href="#offline-backup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Offline Backup</h3>

<p>Ensure that the server is shut down before backing up. Once completed (or errored out) the server will be restarted:</p>

<pre><code>$ sweetpotato --offline
[offline-backup]  Stopping "SweetpotatoWorld" ... backing up ... starting "SweetpotatoWorld" ... Done!
</code></pre>

<p>As with the live backup, this will not be ran if the file (named after today's date) already exists:</p>

<pre><code>$ sweetpotato --offline
[offline-backup]  Stopping "SweetpotatoWorld" ... backing up ... starting "SweetpotatoWorld" ... Done!
FATAL: File "/srv/backups/minecraft/2014-10-20_SweetpotatoWorld.tar.gz" already exists!
</code></pre>

<h3>
<a id="restart" class="anchor" href="#restart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Restart</h3>

<pre><code>$ sweetpotato --restart
[restart] Restarting SweetpotatoWorld ... Done!
</code></pre>

<p>If the configured world is not running, is is started.</p>

<pre><code>$ sweetpotato --restart
[restart] Starting SweetpotatoWorld ... Done!
</code></pre>

<h3>
<a id="start" class="anchor" href="#start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Start</h3>

<pre><code>$ sweetpotato --start
[start] Starting "SweetpotatoWorld" ... Done!
</code></pre>

<p>Fails if the configured world is already running.</p>

<pre><code>$ sweetpotato --start
FATAL: World "SweetpotatoWorld" already running with PID 30320
</code></pre>

<h3>
<a id="stop" class="anchor" href="#stop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stop</h3>

<pre><code>$ sweetpotato --stop
[stop] Stopping "SweetpotatoWorld" ... Done!
</code></pre>

<p>Fails if the configured world is not running.</p>

<pre><code>$ sweetpotato --stop
FATAL: Cannot stop "SweetpotatoWorld" - it is not running!
</code></pre>

<h3>
<a id="webui" class="anchor" href="#webui" aria-hidden="true"><span class="octicon octicon-link"></span></a>WebUI</h3>

<p>A simple web-based interface for many of the functions offered by <code>sweetpotato</code>. By default it binds to port <code>8080</code>, but this can be changed with the <code>--web-port</code> option or a conf file setting.</p>

<pre><code>$ sweetpotato --web
Bottle v0.12.7 server starting up (using WSGIRefServer())...
Listening on http://127.0.0.1:3434/
Hit Ctrl-C to quit.
</code></pre>

<h3>
<a id="forge" class="anchor" href="#forge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Forge</h3>

<p><code>sweetpotato</code> supports using Forge, and defaults to the latest Recommended 1.7.10 build. You can set a specific Forge version with the <code>-f</code> or <code>--forge</code> option. The extra <code>-P</code> or <code>--permgen</code> option is available for Forge, by default it is set to 256MB.</p>

<ul>
<li>Both your Forge version and permgen setting can be stored in a conf file or passed in as arguments.</li>
<li>You can use the <code>-C</code> or <code>--create</code> option to download your Forge jar, just as you would with a vanilla server, however don't expect to be able to run it as you'll be missing external dependencies.</li>
</ul>

<p>Here is an example conf file for a Forge server, taken from my server:</p>

<pre><code>## Generated by sweetpotato at Mon Dec 15 22:29:49 2014
[Settings]
mc_version: 1.7.10
webui_port: 34345
mem_max: 4
mem_format: GB
backup_dir: /srv/ftb/backups
screen_name: llx
permgen: 256
compression: gz
server_dir: /srv/ftb/LLX
mem_min: 3
world_name: LarrylandX
forge: 1.7.10-10.13.2.1230
</code></pre>

<h2>
<a id="etc" class="anchor" href="#etc" aria-hidden="true"><span class="octicon octicon-link"></span></a>ETC</h2>

<ul>
<li><a href="http://hristoast.github.io/sweetpotato">http://hristoast.github.io/sweetpotato</a></li>
<li>
<p><a href="https://github.com/hristoast/sweetpotato">https://github.com/hristoast/sweetpotato</a></p>

<p><em>Thanks for reading!</em></p>
</li>
</ul>
        </section>

        <footer>
          Sweetpotato is maintained by <a href="https://github.com/hristoast">hristoast</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
